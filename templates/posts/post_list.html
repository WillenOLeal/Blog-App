{% extends 'posts/base.html' %}

{% block content %}
    {% if posts %}
        {% for post in posts %}
            <div class="card z-depth-2">
                <div class="card-content">
                  <a href="{% url 'post_detail' post.slug %}" class="orange-text"><span class="card-title">{{ post.title|title }}</span></a>
                  <p>{{ post.body|linebreaks|truncatechars:150}}
                     {% if post.body|length > 150 %}
                        <a href="{% url 'post_detail' post.slug %}" class="orange-text">Read More</a>
                     {% endif %}
                  </p>
                </div>
                <div class="card-action">
                  <small class="grey-text lighten-1">{{ post.author.username }} {{ post.published_at|date:"M d, Y" }}</small>
                  <span class="orange-text right"> {{ post.comments_count }} </span><i style="margin-right: 1%" class="teal-text right material-icons">comment</i>
                  <span class="orange-text right"> {{ post.views_count }} </span><i style="margin-right: 1%" class="teal-text right material-icons">visibility</i>
                  <a href="{% url 'post_like' post.slug %}"><span class="right"> {{ post.likes_count }} </span><i style="margin-right: 1%" class="teal-text right material-icons">thumb_up</i></a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <div class="card z-depth-2">
            <div class="card-content center-align">
                <i class="grey-text lighten-1 medium material-icons">folder_open</i>
                <h4 class="grey-text lighten-1 mtzero">Nothing Posted Yet...</h4>
                <small class="grey-text lighten-2"><a class="orange-text" href="{{ request.scheme }}://{{ request.get_host }}{% url 'post_create' %}">Be the first!</a></small>
            </div>
        </div>
    {% endif %}
    <div class="fixed-action-btn">
      <a href="{% url 'post_create' %}" class="btn-floating btn-large">
        <i class="large material-icons teal lighten-1">add</i>
      </a>
    </div>
{% endblock %}
